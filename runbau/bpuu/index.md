# bpuu

ビープー語（bpuu、[bi:pu:]）は けぺけん が開発中の言語。

もとになったもの・先行研究として Dyck language やスライムさん氏による #サン語 #コンスセル語 がある。

名前の由来は binary の b と、フィンランド語で「木」を表す [puu](https://ja.wiktionary.org/wiki/puu) 。

## 概要

bpuu は既存の言語を逸脱する目的で作られた実験的言語である。言葉を伝える媒体として、音ではなくデータ構造を用いる。

## 表記

表記方法は複数あり、等価である限りどの方法を用いても良い。

### 二分木表記

（ここにいい感じの画像）

bpuu は二分木をその基本的な構造とするため、二分木表記が一番直感的である。プログラムによる描画が面倒という欠点がある。

### 多分木表記（maybe tree ではない）

多分木は LISP のリストのような仕組みを使えば二分木に還元できるのでこれも可能。詳しくは [Wikipedia](https://ja.m.wikipedia.org/wiki/%E4%BA%8C%E5%88%86%E6%9C%A8#N%E9%80%B2%E6%9C%A8%E3%81%AE%E4%BA%8C%E5%88%86%E6%9C%A8%E8%A1%A8%E7%8F%BE) を参照。

### 括弧表記

```
<expr> := "" | "(" <expr> ")" <expr>
```
[Dyck language](https://ja.wikipedia.org/wiki/%E3%83%87%E3%82%A3%E3%83%83%E3%82%AF%E8%A8%80%E8%AA%9E) と呼ばれるものである。別に `(` `)` でなくても良い。

### 自然数表記

- 0 を空ノードとする
- N &times; N &rarr; N の写像を考える

をうまくやると、二分木を自然数と全単射で置き換えられる。写像の例は以下。

#### 最初に出た案
```
f(m, n) = 2^m * (2n+1)
```
木の左側にノードがいくつかあるだけで数が莫大に大きくなるのでやめた。

#### 改善案

|     |  0|  1|  2|  3|  4|
|:---:|:-:|:-:|:-:|:-:|:-:|
|__0__|  1|  3|  6| 10| 15|
|__1__|  2|  5|  9| 14|   |
|__2__|  4|  8| 13|   |   |
|__3__|  7| 12|   |   |   |
|__4__| 11|   |   |   |   |

のようにすればそこそこ均一化できる。計算方法は面倒だが以下。
##### f
```
z=(x+y)(x+y+1)/2+y+1
```
##### f^-1
```
m = floor(floor(sqrt(8n-7)-1)/2)+1 として
x = m(m+1)/2-z
y = z-(m-1)m/2-1
```

## 語彙
パターン数は[カタラン数](https://ja.wikipedia.org/wiki/%E3%82%AB%E3%82%BF%E3%83%A9%E3%83%B3%E6%95%B0)によって求まるが、面倒だった。そこで自然数表記が現れ、各構造に対してナンバリングが楽に行えるようになったため、語彙の管理に役に立つと思われる。

## ツール

[ツール](tool)

Chrome と iOS 11 でのみ動作確認。古いブラウザだと動かない。まだ 78 とか 90 とかの木を表示しようとするとエラーになる。（原因はわかっているのでそのうち直す。）
