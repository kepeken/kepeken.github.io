# bpuu

ビープー語（bpuu、[bi:pu:]）は けぺけん が開発中の言語。

もとになったもの・先行研究として Dyck language やスライムさん氏による #サン語 #コンスセル語 がある。

名前の由来は binary の b と、フィンランド語で「木」を表す [puu](https://ja.wiktionary.org/wiki/puu) 。

## 概要

bpuu は既存の言語を逸脱する目的で作られた実験的言語である。言葉を伝える媒体として、音ではなくデータ構造を用いる。

## 表記

表記方法は複数あり、等価である限りどの方法を用いても良い。

### 二分木表記

```
                __10000000__             
               /            \            
           3162             _1755_       
          /    \           /      \      
      __56__    25        9        41    
     /      \     \        \      /  \   
    7        6     4        2    6    4  
   / \      / \     \      /    / \    \ 
  2   2    2   1     1    1    2   1    1
 /   /    /                   /          
1   1    1                   1           
```
bpuu は二分木をその基本的な構造とするため、二分木表記が一番直感的である。プログラムによる描画が面倒という欠点がある。

### 多分木表記（maybe tree ではない）

多分木は LISP のリストのような仕組みを使えば二分木に還元できるのでこれも可能。詳しくは [Wikipedia](https://ja.m.wikipedia.org/wiki/%E4%BA%8C%E5%88%86%E6%9C%A8#N%E9%80%B2%E6%9C%A8%E3%81%AE%E4%BA%8C%E5%88%86%E6%9C%A8%E8%A1%A8%E7%8F%BE) を参照。

### 括弧表記

```
<expr> := "" | "(" <expr> ")" <expr>
```
[Dyck language](https://ja.wikipedia.org/wiki/%E3%83%87%E3%82%A3%E3%83%83%E3%82%AF%E8%A8%80%E8%AA%9E) と呼ばれるものである。別に `(` `)` でなくても良い。

### 自然数表記

- 0 を空ノードとする
- N &times; N &rarr; N の写像を考える

をうまくやると、二分木を自然数と全単射で置き換えられる。[第１案](https://twitter.com/kepeken/status/1029774623787765760)と[第２案](https://twitter.com/kepeken/status/1031492656528941059)があったが廃止された。

#### 第３案

この方法で得られた木を n0、n1、n2、…… と呼ぶ。

|x \ y|  0|  1|  2|  3|
|:---:|:-:|:-:|:-:|:-:|
|__0__|  1|  4|  9| 16|
|__1__|  2|  3|  8| 15|
|__2__|  5|  6|  7| 14|
|__3__| 10| 11| 12| 13|

##### f
```
z = switch x <=> y
      case lt: (y+1)**2-x
      case eq: x**2+y+1
      case gt: x**2+y+1
```
##### f^-1
```
m = sqrt(z-1) として
(x, y) = switch z <=> m*(m+1)+1
           case lt: (m, z-m**2-1)
           case eq: (m, m)
           case gt: ((m+1)**2-z, m)
```

### H木表記

[こういうやつ](https://ja.wikipedia.org/wiki/H%E6%9C%A8)。

### 上り下り表記

```
     /\
    /  \  /\    /\
   /    \/  \  /  \                      /\
  /          \/    \/\            /\    /  \
 /                    \/\/\/\  /\/  \  /    \/\
/                            \/      \/        \/\/\
```

## 語彙
パターン数は[カタラン数](https://ja.wikipedia.org/wiki/%E3%82%AB%E3%82%BF%E3%83%A9%E3%83%B3%E6%95%B0)によって求まるが、面倒だった。そこで自然数表記が現れ、各構造に対してナンバリングが楽に行えるようになったため、語彙の管理に役に立つと思われる。

機能語を n0～n25、内容語語根を n26～n676 とする。（[理由](https://twitter.com/kepeken/status/1031774746952663040)）

合成したい２つの要素を子に持つノードを作ることで、合成語をつくることができる。

<table>
<tr><th>x \ y</th><th colspan="2">機能語</th><th>内容語</th><th>...</th></tr>
<tr><th rowspan="2">機能語</th><td>機</td><td>内(語根)</td><td rowspan="2">色々</td><td rowspan="2">...</td></tr>
<tr><td>内(語根)</td><td>内(語根)</td></tr>
<tr><th>内容語</th><td colspan="2">機(合成語)</td><td>内(合成語)</td><td>...</td></tr>
<tr><th>:</th><td colspan="2">:</td><td>:</td><td>...</td></tr>
</table>

- n0～n25 は機能語、n26～n676 は内容語語根、で決定している。
- 内容語 × 内容語 で新たな内容語を作る。
- 内容語 × 機能語 で新たな機能語を作る。
- 機能語 × 内容語 で、その機能語に基づいて品詞が決まる。

## ツール

[ツール](tool)

Chrome と iOS 11 でのみ動作確認。古いブラウザだと動かない。
